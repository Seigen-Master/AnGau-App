# AnGau App - Docker Compose Configuration
version: '3.8'

services:
  # Next.js Application
  app:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: angau-app
    ports:
      - "9002:9002"
    environment:
      # Supabase Configuration
      - NEXT_PUBLIC_SUPABASE_URL=https://fhnhewauxzznxpsfjdqz.supabase.co
      - NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZobmhld2F1eHp6bnhwc2ZqZHF6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI3MjEwNTgsImV4cCI6MjA3ODI5NzA1OH0.gwD2aOgp8T0zUP4g7SLk5wMFe2eH2OupVJp2FdxY7Tk
      - SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZobmhld2F1eHp6bnhwc2ZqZHF6Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjcyMTA1OCwiZXhwIjoyMDc4Mjk3MDU4fQ.7JdqQrslBWYJP-6bTvWlLRE0sEzdRbzk-WDomuo-WOM
      # App Configuration
      - NEXT_PUBLIC_APP_URL=http://localhost:9002
      - NEXT_PUBLIC_APP_NAME=AnGau Care Management
      - NODE_ENV=production
    volumes:
      - .:/app
      - /app/node_modules
      - /app/.next
    restart: unless-stopped
    networks:
      - angau-network

  # MCP Server (Optional - for Cursor integration)
  mcp-server:
    build:
      context: ./mcp-server
      dockerfile: Dockerfile
    container_name: angau-mcp
    ports:
      - "3001:3001"
    environment:
      - SUPABASE_URL=https://fhnhewauxzznxpsfjdqz.supabase.co
      - SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZobmhld2F1eHp6bnhwc2ZqZHF6Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MjcyMTA1OCwiZXhwIjoyMDc4Mjk3MDU4fQ.7JdqQrslBWYJP-6bTvWlLRE0sEzdRbzk-WDomuo-WOM
      - MCP_PORT=3001
      - MCP_API_KEY=angau-mcp-secret-2025
    restart: unless-stopped
    networks:
      - angau-network
    depends_on:
      - app

networks:
  angau-network:
    driver: bridge

